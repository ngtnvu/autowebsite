(function(e){var t=e.mapster.utils;t.areaCorners=function(n,r,i,s,o){var a,f,l,c,h,p,d,v,m,g,y,b,w,E,S=0,x=0,T,N,C,k,L,A,O=[];n=n.length?n:[n];i=i?e(i):e(document.body);a=i.offset();T=a.left;N=a.top;if(r){a=e(r).offset();S=a.left;x=a.top}for(E=0;E<n.length;E++){A=n[E];if(A.nodeName==="AREA"){C=t.split(A.coords,parseInt);switch(A.shape){case "circle":y=C[0];b=C[1];k=C[2];O=[];for(E=0;E<360;E+=20){L=E*Math.PI/180;O.push(y+k*Math.cos(L),b+k*Math.sin(L))}break;case "rect":O.push(C[0],C[1],C[2],C[1],C[2], C[3],C[0],C[3]);break;default:O=O.concat(C);break}for(E=0;E<O.length;E+=2){O[E]=parseInt(O[E],10)+S;O[E+1]=parseInt(O[E+1],10)+x}}else{A=e(A);a=A.position();O.push(a.left,a.top,a.left+A.width(),a.top,a.left+A.width(),a.top+A.height(),a.left,a.top+A.height())}}l=c=d=m=999999;h=p=v=g=-1;for(E=O.length-2;E>=0;E-=2){y=O[E];b=O[E+1];if(y<l){l=y;g=b}if(y>h){h=y;m=b}if(b<c){c=b;v=y}if(b>p){p=b;d=y}}if(s&&o){f=false;e.each([[v-s,c-o],[d,c-o],[l-s,g-o],[l-s,m],[h,g-o],[h,m],[v-s,p],[d,p]],function(e,t){if(!f&& t[0]>T&&t[1]>N){w=t;f=true;return false}});if(!f)w=[h,p]}return w}})(jQuery);